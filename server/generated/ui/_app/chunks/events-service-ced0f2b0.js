var l=Object.defineProperty;var f=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;var p=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,m=(e,t)=>{for(var n in t||(t={}))v.call(t,n)&&p(e,n,t[n]);if(f)for(var n of f(t))h.call(t,n)&&p(e,n,t[n]);return e};var A=(e,t)=>{var n={};for(var r in e)v.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&f)for(var r of f(e))t.indexOf(r)<0&&h.call(e,r)&&(n[r]=e[r]);return n};import{h as F,r as w,a as P}from"./route-for-api-9b8f6a57.js";import{i as y}from"./is-function-b969a126.js";import{t as b}from"./index-fd0dc0c9.js";const E=(e={},t={})=>{const n=m({},e);for(const r of Object.keys(t)){const s=n[r];Array.isArray(s)?n[r]=n[r].concat(t[r]):typeof s=="object"&&!Array.isArray(s)?n[r]=E(n[r],t[r]):n[r]=t[r]}return n},k=async(e,{onStart:t,onUpdate:n,onComplete:r,onError:s=F,token:u,previousProps:i}={})=>{!i&&y(t)&&t();try{const c=await e(u),{nextPageToken:o}=c,d=A(c,["nextPageToken"]),a=E(i,d);return y(n)&&n(a,d),o?k(e,{onStart:t,onUpdate:n,onComplete:r,token:o,previousProps:a}):(y(r)&&r(a),a)}catch(g){s(g)}},j=e=>e==="ascending"||e==="descending",q=e=>!j(e)||e==="descending"?"events.descending":e==="ascending"?"events.ascending":"events.descending",x=async({namespace:e,workflowId:t,runId:n,sort:r,onStart:s,onUpdate:u,onComplete:i})=>{const c=q(r);return(await k(async o=>w(P(c,{namespace:e,workflowId:t,runId:n}),{token:o,request:fetch}),{onStart:s,onUpdate:u,onComplete:i})).history.events},z=async e=>{const{settings:t,namespace:n}=e;return x(e).then(r=>b({response:r,namespace:n,settings:t}))};export{z as a,x as f};
