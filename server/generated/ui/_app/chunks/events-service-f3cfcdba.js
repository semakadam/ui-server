var l=Object.defineProperty;var u=Object.getOwnPropertySymbols;var v=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;var p=(e,s,n)=>s in e?l(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,A=(e,s)=>{for(var n in s||(s={}))v.call(s,n)&&p(e,n,s[n]);if(u)for(var n of u(s))h.call(s,n)&&p(e,n,s[n]);return e};var m=(e,s)=>{var n={};for(var r in e)v.call(e,r)&&s.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&u)for(var r of u(e))s.indexOf(r)<0&&h.call(e,r)&&(n[r]=e[r]);return n};import{i as y,h as F,r as w,a as P}from"./route-for-api-e9ca21c2.js";import{t as b}from"./index-3c12228a.js";const E=(e={},s={})=>{const n=A({},e);for(const r of Object.keys(s)){const t=n[r];Array.isArray(t)?n[r]=n[r].concat(s[r]):typeof t=="object"&&!Array.isArray(t)?n[r]=E(n[r],s[r]):n[r]=s[r]}return n},k=async(e,{onStart:s,onUpdate:n,onComplete:r,onError:t=F,token:f,previousProps:i}={})=>{!i&&y(s)&&s();try{const c=await e(f),{nextPageToken:o}=c,d=m(c,["nextPageToken"]),a=E(i,d);return y(n)&&n(a,d),o?k(e,{onStart:s,onUpdate:n,onComplete:r,token:o,previousProps:a}):(y(r)&&r(a),a)}catch(g){t(g)}},j=e=>e==="ascending"||e==="descending",q=e=>!j(e)||e==="descending"?"events.descending":e==="ascending"?"events.ascending":"events.descending",x=async({namespace:e,workflowId:s,runId:n,sort:r,onStart:t,onUpdate:f,onComplete:i})=>{const c=q(r);return(await k(async o=>w(P(c,{namespace:e,workflowId:s,runId:n}),{token:o,request:fetch}),{onStart:t,onUpdate:f,onComplete:i})).history.events},T=async e=>{const{settings:s,namespace:n}=e;return x(e).then(r=>b({response:r,namespace:n,settings:s}))};export{T as a,x as f};
