var _e=Object.defineProperty,pe=Object.defineProperties;var he=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,ge=Object.prototype.propertyIsEnumerable;var W=(o,e,n)=>e in o?_e(o,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[e]=n,x=(o,e)=>{for(var n in e||(e={}))ve.call(e,n)&&W(o,n,e[n]);if(Q)for(var n of Q(e))ge.call(e,n)&&W(o,n,e[n]);return o},ee=(o,e)=>pe(o,he(e));import{X as be,S,i as F,s as H,e as y,t as ne,k as z,c as B,a as M,h as te,d as h,m as K,b as d,Y as re,g as L,M as g,T as we,j as ke,l as E,E as oe,N as Z,C as se,V as ie,w as $,x as C,y as A,Z as J,q as b,o as w,B as U,_ as P,$ as X,n as ye,p as Be,a0 as Ie,I as Ve,J as Ee,K as Ne,L as Te}from"../chunks/index-b7ec6eb7.js";import{g as $e}from"../chunks/get-namespace-d07a8a35.js";import{n as Ce}from"../chunks/notifications-30963af3.js";import{r as ue,a as fe}from"../chunks/route-for-api-24b24782.js";import{f as Ae,N as Ue,E as Le}from"../chunks/error-boundary-7a1614d7.js";import{f as je}from"../chunks/settings-service-11aaf893.js";/* empty css                    */import Me from"./_header.svelte-c21cf02c.js";import{p as ce}from"../chunks/stores-5fddffdd.js";import{p as Oe}from"../chunks/persist-store-f29105ba.js";import"../chunks/index-3b47d797.js";import"../chunks/is-network-error-ac7c8caf.js";import"../chunks/route-for-e4b4dbdd.js";import"../chunks/index-6bb2ef84.js";import"../chunks/error-191fbc0a.js";import"../chunks/navigation-6709cf39.js";import"../chunks/singletons-d1fb5791.js";import"../chunks/link-b4395d28.js";import"../chunks/index-5902cb5b.js";import"../chunks/index-009a97a3.js";import"../chunks/data-encoder-status-6541b7a1.js";import"../chunks/data-converter-config-613f553d.js";import"../chunks/is-http-42140adc.js";import"../chunks/tooltip-b37dbd49.js";import"../chunks/copyable-eed1767d.js";import"../chunks/modal-78ef2fd6.js";import"../chunks/button-29aac72b.js";const qe=(o,e)=>!o.auth.enabled||Boolean(e==null?void 0:e.email),De=async(o=fetch)=>{const e=await o("https://api.github.com/repos/temporalio/ui-server/releases"),n=await e.json();if(!e.ok)return;let t;if(n.length>0){const{tag_name:r}=n[0];t=r.replace("v","")}return t},ae={namespaces:[]};async function ze(o,e=fetch){if(o.runtimeEnvironment.isCloud)return ae;const n=await ue(fe("namespaces"),{request:e,onError:()=>Ce.add("error","Unable to fetch namespaces")});return n!=null?n:ae}const Ke=async(o,e=fetch)=>{if(!o.runtimeEnvironment.isCloud)return await ue(fe("cluster"),{request:e})};var R=(o=>(o[o.TemporalVersion=1]="TemporalVersion",o[o.UIVersion=2]="UIVersion",o))(R||{});const me=(o,e)=>{if(!o||!e)return!1;const[n,t,r]=o.split(".").map(Number),[i,s,l]=e.split(".").map(Number);return n!==i?n>i:t!==s?t>s:r>l},Y=Oe("closedBanners",null),Se=o=>{var n;let e=(n=be(Y))!=null?n:[];e=[...e,o],e=e.slice(e.length-10,e.length),Y.set(e)};function le(o){let e,n,t,r,i,s,l,a,u,c;return{c(){e=y("section"),n=y("a"),t=ne(o[2]),r=z(),i=y("button"),s=ne("\u2715"),this.h()},l(f){e=B(f,"SECTION",{class:!0,"data-cy":!0});var m=M(e);n=B(m,"A",{href:!0,target:!0});var k=M(n);t=te(k,o[2]),k.forEach(h),r=K(m),i=B(m,"BUTTON",{class:!0,"data-cy":!0});var v=M(i);s=te(v,"\u2715"),v.forEach(h),m.forEach(h),this.h()},h(){d(n,"href",o[3]),d(n,"target","_blank"),d(i,"class","text-black-600 absolute top-0 right-0 mr-5"),d(i,"data-cy","close-banner"),d(e,"class",l=re(`relative block text-center leading-10 ${o[1]}`)+" svelte-1xgik0j"),d(e,"data-cy",a=o[5].dataCy)},m(f,m){L(f,e,m),g(e,n),g(n,t),g(e,r),g(e,i),g(i,s),u||(c=we(i,"click",o[8]),u=!0)},p(f,m){m&4&&ke(t,f[2]),m&8&&d(n,"href",f[3]),m&2&&l!==(l=re(`relative block text-center leading-10 ${f[1]}`)+" svelte-1xgik0j")&&d(e,"class",l),m&32&&a!==(a=f[5].dataCy)&&d(e,"data-cy",a)},d(f){f&&h(e),u=!1,c()}}}function Fe(o){let e,n=o[4]&&le(o);return{c(){n&&n.c(),e=E()},l(t){n&&n.l(t),e=E()},m(t,r){n&&n.m(t,r),L(t,e,r)},p(t,[r]){t[4]?n?n.p(t,r):(n=le(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},i:oe,o:oe,d(t){n&&n.d(t),t&&h(e)}}}function He(o,e,n){let t,r;Z(o,Y,f=>n(7,r=f));let{key:i}=e,{severity:s}=e,{message:l}=e,{link:a}=e,{shownBanner:u}=e;const c=()=>Se(i);return o.$$set=f=>{n(5,e=se(se({},e),ie(f))),"key"in f&&n(0,i=f.key),"severity"in f&&n(1,s=f.severity),"message"in f&&n(2,l=f.message),"link"in f&&n(3,a=f.link),"shownBanner"in f&&n(6,u=f.shownBanner)},o.$$.update=()=>{o.$$.dirty&129&&n(4,t=!(r!=null?r:[]).includes(i)),o.$$.dirty&80&&(t||n(6,u++,u))},e=ie(e),[i,s,l,a,t,e,u,r,c]}class de extends S{constructor(e){super(),F(this,e,He,Fe,H,{key:0,severity:1,message:2,link:3,shownBanner:6})}}function Re(o){let e,n,t;function r(s){o[6](s)}let i={key:o[2],severity:o[1],message:o[5],link:o[3],dataCy:"temporal-version-banner"};return o[0]!==void 0&&(i.shownBanner=o[0]),e=new de({props:i}),P.push(()=>X(e,"shownBanner",r)),{c(){$(e.$$.fragment)},l(s){C(e.$$.fragment,s)},m(s,l){A(e,s,l),t=!0},p(s,l){const a={};!n&&l&1&&(n=!0,a.shownBanner=s[0],J(()=>n=!1)),e.$set(a)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){w(e.$$.fragment,s),t=!1},d(s){U(e,s)}}}function Je(o){let e,n,t=o[4]&&Re(o);return{c(){t&&t.c(),e=E()},l(r){t&&t.l(r),e=E()},m(r,i){t&&t.m(r,i),L(r,e,i),n=!0},p(r,[i]){r[4]&&t.p(r,i)},i(r){n||(b(t),n=!0)},o(r){w(t),n=!1},d(r){t&&t.d(r),r&&h(e)}}}function Pe(o,e,n){let t;Z(o,ce,p=>n(12,t=p));var r,i,s,l,a;let{shownBanner:u}=e;const{cluster:c}=t.stuff,f={High:"high",Medium:"medium",Low:"low"},{recommended:m,current:k}=(r=c==null?void 0:c.versionInfo)!==null&&r!==void 0?r:{},v=(s=(i=c==null?void 0:c.versionInfo)===null||i===void 0?void 0:i.alerts)===null||s===void 0?void 0:s[0],I=v?f[v.severity]:f.Low,q=`server-v${k==null?void 0:k.version}`,T=`https://github.com/temporalio/temporal/releases/tag/v${(a=(l=c==null?void 0:c.versionInfo)===null||l===void 0?void 0:l.recommended)===null||a===void 0?void 0:a.version}`,V=me(m==null?void 0:m.version,k==null?void 0:k.version),O=I===f.Low?`\u{1F4E5} Temporal v${m==null?void 0:m.version} is available`:`\u{1F4E5} ${v==null?void 0:v.message}`;function _(p){u=p,n(0,u)}return o.$$set=p=>{"shownBanner"in p&&n(0,u=p.shownBanner)},[u,I,q,T,V,O,_]}class Xe extends S{constructor(e){super(),F(this,e,Pe,Je,H,{shownBanner:0})}}function Ye(o){let e,n,t;function r(s){o[6](s)}let i={key:o[1],severity:Ge,message:o[2],link:o[4],dataCy:"ui-version-banner"};return o[0]!==void 0&&(i.shownBanner=o[0]),e=new de({props:i}),P.push(()=>X(e,"shownBanner",r)),{c(){$(e.$$.fragment)},l(s){C(e.$$.fragment,s)},m(s,l){A(e,s,l),t=!0},p(s,l){const a={};!n&&l&1&&(n=!0,a.shownBanner=s[0],J(()=>n=!1)),e.$set(a)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){w(e.$$.fragment,s),t=!1},d(s){U(e,s)}}}function Ze(o){let e,n,t=o[3]&&Ye(o);return{c(){t&&t.c(),e=E()},l(r){t&&t.l(r),e=E()},m(r,i){t&&t.m(r,i),L(r,e,i),n=!0},p(r,[i]){r[3]&&t.p(r,i)},i(r){n||(b(t),n=!0)},o(r){w(t),n=!1},d(r){t&&t.d(r),r&&h(e)}}}const Ge="low";function Qe(o,e,n){let{shownBanner:t}=e,{uiVersionInfo:r}=e;const i=`ui-v${r==null?void 0:r.current}`,s=`\u{1F4E5} Temporal UI v${r==null?void 0:r.recommended} is available`,l=me(r==null?void 0:r.recommended,r==null?void 0:r.current),a=`https://github.com/temporalio/ui-server/releases/tag/v${r==null?void 0:r.recommended}`;function u(c){t=c,n(0,t)}return o.$$set=c=>{"shownBanner"in c&&n(0,t=c.shownBanner),"uiVersionInfo"in c&&n(5,r=c.uiVersionInfo)},[t,i,s,l,a,r,u]}class We extends S{constructor(e){super(),F(this,e,Qe,Ze,H,{shownBanner:0,uiVersionInfo:5})}}function xe(o){let e,n,t,r;const i=[nn,en],s=[];function l(a,u){return a[1]===R.TemporalVersion?0:a[1]===R.UIVersion?1:-1}return~(e=l(o))&&(n=s[e]=i[e](o)),{c(){n&&n.c(),t=E()},l(a){n&&n.l(a),t=E()},m(a,u){~e&&s[e].m(a,u),L(a,t,u),r=!0},p(a,u){let c=e;e=l(a),e===c?~e&&s[e].p(a,u):(n&&(ye(),w(s[c],1,1,()=>{s[c]=null}),Be()),~e?(n=s[e],n?n.p(a,u):(n=s[e]=i[e](a),n.c()),b(n,1),n.m(t.parentNode,t)):n=null)},i(a){r||(b(n),r=!0)},o(a){w(n),r=!1},d(a){~e&&s[e].d(a),a&&h(t)}}}function en(o){let e,n,t;function r(s){o[4](s)}let i={uiVersionInfo:o[0]};return o[1]!==void 0&&(i.shownBanner=o[1]),e=new We({props:i}),P.push(()=>X(e,"shownBanner",r)),{c(){$(e.$$.fragment)},l(s){C(e.$$.fragment,s)},m(s,l){A(e,s,l),t=!0},p(s,l){const a={};l&1&&(a.uiVersionInfo=s[0]),!n&&l&2&&(n=!0,a.shownBanner=s[1],J(()=>n=!1)),e.$set(a)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){w(e.$$.fragment,s),t=!1},d(s){U(e,s)}}}function nn(o){let e,n,t;function r(s){o[3](s)}let i={};return o[1]!==void 0&&(i.shownBanner=o[1]),e=new Xe({props:i}),P.push(()=>X(e,"shownBanner",r)),{c(){$(e.$$.fragment)},l(s){C(e.$$.fragment,s)},m(s,l){A(e,s,l),t=!0},p(s,l){const a={};!n&&l&2&&(n=!0,a.shownBanner=s[1],J(()=>n=!1)),e.$set(a)},i(s){t||(b(e.$$.fragment,s),t=!0)},o(s){w(e.$$.fragment,s),t=!1},d(s){U(e,s)}}}function tn(o){let e,n,t=o[2]&&xe(o);return{c(){t&&t.c(),e=E()},l(r){t&&t.l(r),e=E()},m(r,i){t&&t.m(r,i),L(r,e,i),n=!0},p(r,[i]){r[2]&&t.p(r,i)},i(r){n||(b(t),n=!0)},o(r){w(t),n=!1},d(r){t&&t.d(r),r&&h(e)}}}function rn(o,e,n){let t;Z(o,ce,u=>n(5,t=u));let{uiVersionInfo:r}=e,i=R.TemporalVersion;const s=t.stuff.settings.notifyOnNewVersion;function l(u){i=u,n(1,i)}function a(u){i=u,n(1,i)}return o.$$set=u=>{"uiVersionInfo"in u&&n(0,r=u.uiVersionInfo)},[r,i,s,l,a]}class on extends S{constructor(e){super(),F(this,e,rn,tn,H,{uiVersionInfo:0})}}function sn(o){let e;const n=o[2].default,t=Ve(n,o,o[3],null);return{c(){t&&t.c()},l(r){t&&t.l(r)},m(r,i){t&&t.m(r,i),e=!0},p(r,i){t&&t.p&&(!e||i&8)&&Ee(t,n,r,r[3],e?Te(n,r[3],i,null):Ne(r[3]),null)},i(r){e||(b(t,r),e=!0)},o(r){w(t,r),e=!1},d(r){t&&t.d(r)}}}function an(o){let e,n,t,r,i,s,l,a,u,c,f,m,k,v,I,q,T,V,O;return u=new Ue({}),m=new Me({props:{user:o[0]}}),I=new on({props:{uiVersionInfo:o[1]}}),V=new Le({props:{onError:ln,$$slots:{default:[sn]},$$scope:{ctx:o}}}),{c(){e=y("link"),n=y("link"),t=y("meta"),r=y("meta"),i=y("meta"),s=y("meta"),l=z(),a=y("div"),$(u.$$.fragment),c=z(),f=y("div"),$(m.$$.fragment),k=z(),v=y("section"),$(I.$$.fragment),q=z(),T=y("div"),$(V.$$.fragment),this.h()},l(_){const p=Ie('[data-svelte="svelte-15ltrtv"]',document.head);e=B(p,"LINK",{rel:!0,href:!0}),n=B(p,"LINK",{rel:!0,href:!0}),t=B(p,"META",{property:!0,content:!0}),r=B(p,"META",{property:!0,content:!0}),i=B(p,"META",{property:!0,content:!0}),s=B(p,"META",{property:!0,content:!0}),p.forEach(h),l=K(_),a=B(_,"DIV",{class:!0});var N=M(a);C(u.$$.fragment,N),c=K(N),f=B(N,"DIV",{class:!0});var D=M(f);C(m.$$.fragment,D),D.forEach(h),k=K(N),v=B(N,"SECTION",{id:!0,class:!0});var j=M(v);C(I.$$.fragment,j),q=K(j),T=B(j,"DIV",{class:!0});var G=M(T);C(V.$$.fragment,G),G.forEach(h),j.forEach(h),N.forEach(h),this.h()},h(){document.title="Temporal",d(e,"rel","manifest"),d(e,"href","/site.webmanifest"),d(n,"rel","apple-touch-icon"),d(n,"href","/apple-touch-icon.png"),d(t,"property","og:title"),d(t,"content","Temporal"),d(r,"property","og:type"),d(r,"content","website"),d(i,"property","og:url"),d(i,"content","https://temporal.io"),d(s,"property","og:image"),d(s,"content","/banner.png"),d(f,"class","sticky top-0 z-20 h-screen w-auto"),d(T,"class","z-10 flex h-full flex-col gap-4 px-10 pb-10 pt-8"),d(v,"id","content"),d(v,"class","h-screen w-max flex-auto overflow-auto"),d(a,"class","flex h-screen w-screen flex-row")},m(_,p){g(document.head,e),g(document.head,n),g(document.head,t),g(document.head,r),g(document.head,i),g(document.head,s),L(_,l,p),L(_,a,p),A(u,a,null),g(a,c),g(a,f),A(m,f,null),g(a,k),g(a,v),A(I,v,null),g(v,q),g(v,T),A(V,T,null),O=!0},p(_,[p]){const N={};p&1&&(N.user=_[0]),m.$set(N);const D={};p&2&&(D.uiVersionInfo=_[1]),I.$set(D);const j={};p&8&&(j.$$scope={dirty:p,ctx:_}),V.$set(j)},i(_){O||(b(u.$$.fragment,_),b(m.$$.fragment,_),b(I.$$.fragment,_),b(V.$$.fragment,_),O=!0)},o(_){w(u.$$.fragment,_),w(m.$$.fragment,_),w(I.$$.fragment,_),w(V.$$.fragment,_),O=!1},d(_){h(e),h(n),h(t),h(r),h(i),h(s),_&&h(l),_&&h(a),U(u),U(m),U(I),U(V)}}}const Dn=async function({fetch:o}){const e=await je(o),n=await Ae(o);if(!qe(e,n))return{status:302,redirect:"/login"};const t=await ze(e,o),r=$e({namespaces:t==null?void 0:t.namespaces,settings:e}),i=await Ke(e,o),s={current:e.version,recommended:e.notifyOnNewVersion?await De(o):void 0};return{props:{user:n,uiVersionInfo:s},stuff:{namespaces:t==null?void 0:t.namespaces,settings:ee(x({},e),{defaultNamespace:r}),cluster:i}}},ln=()=>{};function un(o,e,n){let{$$slots:t={},$$scope:r}=e,{user:i}=e,{uiVersionInfo:s}=e;return o.$$set=l=>{"user"in l&&n(0,i=l.user),"uiVersionInfo"in l&&n(1,s=l.uiVersionInfo),"$$scope"in l&&n(3,r=l.$$scope)},[i,s,t,r]}class zn extends S{constructor(e){super(),F(this,e,un,an,H,{user:0,uiVersionInfo:1})}}export{zn as default,Dn as load};
